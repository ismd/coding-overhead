---
layout: post
title: Heroku
excerpt: Запускаем свои скрипты в облаке
---

Heroku — это сервис, позволяющий запускать в облаке собственные скрипты/программы, написанные на языках:
- Node.js
- Ruby
- Python
- PHP
- Java
- Go
- Scala
- Clojure

Работа с Heroku состоит из следующих шагов:
- Создание аккаунта
- Авторизация
- Создание проекта
- Деплой проекта

Все шаги кроме первого происходят локально на компьютере разработчика.

Для взаимодействия используется консольная утилита `heroku`:

```
$ yaourt -S heroku-cli
```

После создания аккаунта на сайте авторизуемся:

```
$ heroku login
```

## Создание проекта
Heroku работает из локального git репозитория. Для создания heroku проекта переходим в директорию с репозиторием и выполняем:

```
$ heroku create
```

Heroku генерирует (либо можно указать вручную) поддомен третьего уровня для проектов. При создании будет добавлен git remote в локальный git репозиторий.

Чтобы Heroku знал, как запускать проект, создаём файл `Procfile` со следующим содержимым:

```
web: <команда для запуска>
```

В данном примере `web` указывает на тип процесса. Procfile может содержать множество процессов с разными типами.

Стоит отметить, что тип `web` слушает 443 порт, но в самом приложении необходимо читать и биндить порт из переменной окружения `PORT`:

```python
os.getenv('PORT', 80)
```

Пушим изменения в Heroku:

```
$ git push heroku master
```

Открываем проект в браузере:

```
$ heroku open
```

## Взаимодействие с Heroku
### Просмотр логов:
```
$ heroku logs --tail
```

### Просмотр запущенных приложений:
```
$ heroku ps
```

### Запуск локально:
```
$ heroku local web
```

### Запуск команды:
```
$ heroku run <команда>
```

### Просмотр приложений:
<https://dashboard.heroku.com>

## Документация:
<https://devcenter.heroku.com>
